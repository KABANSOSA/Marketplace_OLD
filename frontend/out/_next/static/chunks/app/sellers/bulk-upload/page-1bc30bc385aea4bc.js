(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{25610:function(e,t,r){Promise.resolve().then(r.bind(r,57852))},57852:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var l=r(57437),c=r(2265),o=r(65725),n=r(69064);function s(){let[e,t]=(0,c.useState)(!1),[r,s]=(0,c.useState)(0),{getRootProps:a,getInputProps:d,isDragActive:i}=(0,o.uI)({accept:{"text/csv":[".csv"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},onDrop:async(e,r)=>{if(0===e.length)return;let l=e[0],c=new FormData;c.append("file",l);try{t(!0),s(0);let e=await fetch("/api/sellers/bulk-upload",{method:"POST",body:c});if(!e.ok)throw Error("Ошибка при загрузке файла");let r=await e.json();n.Am.success("Успешно загружено ".concat(r.successCount," товаров"))}catch(e){n.Am.error("Ошибка при загрузке файла"),console.error("Upload error:",e)}finally{t(!1),s(0)}}}),u=async()=>{try{let e=await fetch("/api/sellers/bulk-upload/template"),t=await e.blob(),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download="product_template.csv",document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l)}catch(e){n.Am.error("Ошибка при скачивании шаблона"),console.error("Template download error:",e)}};return(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Массовая загрузка товаров"}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("button",{onClick:u,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Скачать шаблон (CSV)"})}),(0,l.jsxs)("div",{...a(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer\n          ".concat(i?"border-blue-500 bg-blue-50":"border-gray-300","\n          ").concat(e?"opacity-50 cursor-not-allowed":""),children:[(0,l.jsx)("input",{...d(),disabled:e}),e?(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Загрузка файла..."}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(r,"%")}})})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-lg mb-2",children:i?"Отпустите файл для загрузки":"Перетащите файл сюда или нажмите для выбора"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Поддерживаемые форматы: CSV, XLSX, XLS"})]})]})]})}}},function(e){e.O(0,[213,971,117,560],function(){return e(e.s=25610)}),_N_E=e.O()}]);