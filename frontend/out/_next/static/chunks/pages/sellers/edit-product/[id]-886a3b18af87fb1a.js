(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{56822:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sellers/edit-product/[id]",function(){return r(65994)}])},65994:function(e,t,r){"use strict";r.r(t);var s=r(85893),n=r(67294),a=r(59583),l=r(87066),i=r(9008),c=r.n(i),u=r(41664),d=r.n(u);t.default=()=>{let e=(0,a.useRouter)(),{id:t}=e.query,[r,i]=(0,n.useState)(null),[u,o]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[x,j]=(0,n.useState)(0),[f,v]=(0,n.useState)(0),[m,_]=(0,n.useState)(""),[g,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{if(t)try{let e=await l.Z.get("http://localhost:3002/products/".concat(t));if(200===e.status){let t=e.data.product;i(t),o(t.name),p(t.description),j(t.price),v(t.stock)}else _(e.data.message||"Ошибка при загрузке данных товара.")}catch(e){console.error("Ошибка сети или сервера:",e),_("Произошла ошибка при подключении к серверу или товар не найден.")}finally{b(!1)}})()},[t]);let y=async s=>{if(s.preventDefault(),_(""),!r){_("Ошибка: данные товара не загружены.");return}try{let s=await l.Z.put("http://localhost:3001/products/".concat(t),{name:u,description:h,price:parseFloat(x.toString()),stock:parseInt(f.toString())});200===s.status?(_("Товар успешно обновлен!"),e.push("/sellers/".concat(r.seller_id,"/products"))):_(s.data.message||"Ошибка при обновлении товара.")}catch(e){console.error("Ошибка сети или сервера:",e),_("Произошла ошибка при подключении к серверу. Пожалуйста, попробуйте еще раз.")}};return g?(0,s.jsx)("div",{children:"Загрузка товара..."}):r?(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"Редактировать товар - Marketplace"})}),(0,s.jsxs)("h1",{children:["Редактировать товар: ",r.name]}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",children:"Название товара:"}),(0,s.jsx)("input",{type:"text",id:"name",value:u,onChange:e=>o(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",children:"Описание:"}),(0,s.jsx)("textarea",{id:"description",value:h,onChange:e=>p(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"price",children:"Цена:"}),(0,s.jsx)("input",{type:"number",id:"price",value:x,onChange:e=>j(parseFloat(e.target.value)),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"stock",children:"Количество на складе:"}),(0,s.jsx)("input",{type:"number",id:"stock",value:f,onChange:e=>v(parseInt(e.target.value)),required:!0})]}),(0,s.jsx)("button",{type:"submit",children:"Обновить товар"})]}),m&&(0,s.jsx)("p",{children:m}),(0,s.jsx)("p",{children:(0,s.jsx)(d(),{href:"/sellers/".concat(r.seller_id,"/products"),children:"Вернуться к списку товаров"})})]}):(0,s.jsx)("div",{children:"Товар не найден."})}},9008:function(e,t,r){e.exports=r(50494)}},function(e){e.O(0,[396,66,888,774,179],function(){return e(e.s=56822)}),_N_E=e.O()}]);