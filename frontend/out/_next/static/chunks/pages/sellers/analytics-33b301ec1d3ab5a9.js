(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{16244:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sellers/analytics",function(){return s(61974)}])},61974:function(e,a,s){"use strict";s.r(a);var r=s(85893),t=s(20726),i=s.n(t),o=s(67294),n=s(59583),d=s(9008),l=s.n(d),c=s(41664),x=s.n(c),f=s(39958),m=s(46734),h=s(18329),j=s(38168),b=s(37705),p=s(48235),g=s(81868),u=s(1585),w=s(71929),y=s(24427),k=s(87680),v=s(42546),N=s(89535);let z=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];a.default=()=>{let e=(0,n.useRouter)(),[a,s]=(0,o.useState)(null),[t,d]=(0,o.useState)("week"),[c,_]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{let a=localStorage.getItem("token"),r=localStorage.getItem("sellerId");if(!a||!r){e.push("/sellers/login");return}(async()=>{try{let e=await fetch("http://localhost:3002/api/v1/sellers/".concat(r,"/analytics?timeRange=").concat(t),{headers:{Authorization:"Bearer ".concat(a)}});if(e.ok){let a=await e.json();s(a)}}catch(e){console.error("Ошибка при загрузке аналитики:",e)}finally{_(!1)}})()},[e,t]),c)?(0,r.jsxs)("div",{className:"loading",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("p",{children:"Загрузка данных..."})]}):(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 analytics-container",children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{className:"jsx-af8da90eee0f1a76",children:"Аналитика - Marketplace"})}),(0,r.jsxs)("header",{className:"jsx-af8da90eee0f1a76 analytics-header",children:[(0,r.jsx)("h1",{className:"jsx-af8da90eee0f1a76",children:"Аналитика"}),(0,r.jsx)(x(),{href:"/sellers/dashboard",className:"back-link",children:"← Назад к панели управления"})]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 time-range-selector",children:[(0,r.jsx)("button",{onClick:()=>d("week"),className:"jsx-af8da90eee0f1a76 "+(("week"===t?"active":"")||""),children:"Неделя"}),(0,r.jsx)("button",{onClick:()=>d("month"),className:"jsx-af8da90eee0f1a76 "+(("month"===t?"active":"")||""),children:"Месяц"}),(0,r.jsx)("button",{onClick:()=>d("year"),className:"jsx-af8da90eee0f1a76 "+(("year"===t?"active":"")||""),children:"Год"})]}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stats-overview",children:[(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-card",children:[(0,r.jsx)("h3",{className:"jsx-af8da90eee0f1a76",children:"Общий доход"}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-value",children:[a.revenue.total.toLocaleString()," ₽"]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-change",children:[a.revenue.growth>0?"+":"",a.revenue.growth,"%"]})]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-card",children:[(0,r.jsx)("h3",{className:"jsx-af8da90eee0f1a76",children:"Средний чек"}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-value",children:[a.revenue.average.toLocaleString()," ₽"]})]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-card",children:[(0,r.jsx)("h3",{className:"jsx-af8da90eee0f1a76",children:"Заказы"}),(0,r.jsx)("div",{className:"jsx-af8da90eee0f1a76 stat-value",children:a.orders.total}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 stat-subvalue",children:[a.orders.pending," ожидают обработки"]})]})]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 charts-grid",children:[(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 chart-card",children:[(0,r.jsx)("h3",{className:"jsx-af8da90eee0f1a76",children:"Продажи по времени"}),(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(m.w,{data:a.sales,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3"}),(0,r.jsx)(j.K,{dataKey:"date"}),(0,r.jsx)(b.B,{yAxisId:"left"}),(0,r.jsx)(b.B,{yAxisId:"right",orientation:"right"}),(0,r.jsx)(p.u,{}),(0,r.jsx)(g.D,{}),(0,r.jsx)(u.x,{yAxisId:"left",type:"monotone",dataKey:"amount",stroke:"#8884d8",name:"Доход"}),(0,r.jsx)(u.x,{yAxisId:"right",type:"monotone",dataKey:"orders",stroke:"#82ca9d",name:"Заказы"})]})})]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 chart-card",children:[(0,r.jsx)("h3",{className:"jsx-af8da90eee0f1a76",children:"Товары по категориям"}),(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(w.u,{children:[(0,r.jsx)(y.b,{data:a.products,dataKey:"count",nameKey:"category",cx:"50%",cy:"50%",outerRadius:100,label:!0,children:a.products.map((e,a)=>(0,r.jsx)(k.b,{fill:z[a%z.length]},"cell-".concat(a)))}),(0,r.jsx)(p.u,{}),(0,r.jsx)(g.D,{})]})})]}),(0,r.jsxs)("div",{className:"jsx-af8da90eee0f1a76 chart-card",children:[(0,r.jsx)("h3",{className:"jsx-af8da90eee0f1a76",children:"Топ продаваемых товаров"}),(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(v.v,{data:a.topProducts,children:[(0,r.jsx)(h.q,{strokeDasharray:"3 3"}),(0,r.jsx)(j.K,{dataKey:"name"}),(0,r.jsx)(b.B,{}),(0,r.jsx)(p.u,{}),(0,r.jsx)(g.D,{}),(0,r.jsx)(N.$,{dataKey:"sales",fill:"#8884d8",name:"Продажи"}),(0,r.jsx)(N.$,{dataKey:"revenue",fill:"#82ca9d",name:"Доход"})]})})]})]})]}),(0,r.jsx)(i(),{id:"af8da90eee0f1a76",children:".analytics-container.jsx-af8da90eee0f1a76{max-width:1200px;margin:0 auto;padding:2rem}.analytics-header.jsx-af8da90eee0f1a76{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:2rem}.back-link.jsx-af8da90eee0f1a76{color:var(--text-secondary);text-decoration:none}.time-range-selector.jsx-af8da90eee0f1a76{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:1rem;margin-bottom:2rem}.time-range-selector.jsx-af8da90eee0f1a76 button.jsx-af8da90eee0f1a76{padding:.5rem 1rem;border:1px solid var(--border-color);-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:white;cursor:pointer;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.time-range-selector.jsx-af8da90eee0f1a76 button.active.jsx-af8da90eee0f1a76{background:var(--primary-color);color:white;border-color:var(--primary-color)}.stats-overview.jsx-af8da90eee0f1a76{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card.jsx-af8da90eee0f1a76{background:white;padding:1.5rem;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}.stat-card.jsx-af8da90eee0f1a76 h3.jsx-af8da90eee0f1a76{color:var(--text-secondary);margin:0 0 1rem 0;font-size:1rem}.stat-value.jsx-af8da90eee0f1a76{font-size:2rem;font-weight:600;color:var(--primary-color);margin-bottom:.5rem}.stat-change.jsx-af8da90eee0f1a76{color:var(--success-color);font-weight:500}.stat-subvalue.jsx-af8da90eee0f1a76{color:var(--text-secondary);font-size:.9rem}.charts-grid.jsx-af8da90eee0f1a76{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:1.5rem}.chart-card.jsx-af8da90eee0f1a76{background:white;padding:1.5rem;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}.chart-card.jsx-af8da90eee0f1a76 h3.jsx-af8da90eee0f1a76{color:var(--text-secondary);margin:0 0 1rem 0;font-size:1rem}.loading.jsx-af8da90eee0f1a76{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;min-height:100vh}.spinner.jsx-af8da90eee0f1a76{width:40px;height:40px;border:4px solid var(--border-color);border-top:4px solid var(--primary-color);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-bottom:1rem}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@media(max-width:768px){.analytics-container.jsx-af8da90eee0f1a76{padding:1rem}.charts-grid.jsx-af8da90eee0f1a76{grid-template-columns:1fr}}"})]})}}},function(e){e.O(0,[396,566,888,774,179],function(){return e(e.s=16244)}),_N_E=e.O()}]);